<div class="admin-manage-help-offer-dialog">
  <div class="header">
    <h1 class="header__title" mat-dialog-title>
      <span>{{ "dialogs.adminManageHelpOffer.title" | translate }}</span>
    </h1>

    <button
      class="header__close-button"
      mat-icon-button
      mat-dialog-close
    >
      <mat-icon>close</mat-icon>
    </button>
  </div>

  <ng-container *ngIf="viewContext$ | async as viewContext">
    <ng-container *ngIf="viewContext.getByIdInProgress">
      <div class="loading-view">
        <mat-spinner [diameter]="50"></mat-spinner>
      </div>
    </ng-container>

    <ng-container *ngIf="viewContext.fullHelpOffer as fullHelpOffer">
      <mat-dialog-content class="content">
        <app-admin-help-offer-details
          [helpOffer]="fullHelpOffer"
        ></app-admin-help-offer-details>

        <ng-container *ngIf="viewContext.updateStatusError as updateStatusError">
          <div class="update-status-error-message">
            <span>{{ updateStatusError | appHttpErrorMessage }}</span>
          </div>
        </ng-container>
      </mat-dialog-content>

      <mat-dialog-actions class="actions">
        <button
          class="actions__item"
          *ngIf="fullHelpOffer.status !== helpOfferStatus.PUBLISHED"
          mat-raised-button
          color="publish"
          [disabled]="viewContext.updateStatusInProgress"
          (click)="handlePublishButtonClick()"
        >
          <span>{{ "dialogs.adminManageHelpOffer.publishButtonLabel" | translate }}</span>
        </button>

        <button
          class="actions__item"
          *ngIf="fullHelpOffer.status !== helpOfferStatus.UNPUBLISHED"
          mat-raised-button
          color="unpublish"
          [disabled]="viewContext.updateStatusInProgress"
          (click)="handleUnpublishButtonClick()"
        >
          <span>{{ "dialogs.adminManageHelpOffer.unpublishButtonLabel" | translate }}</span>
        </button>

        <button
          class="actions__item"
          *ngIf="fullHelpOffer.status !== helpOfferStatus.REJECTED"
          mat-raised-button
          color="reject"
          [disabled]="viewContext.updateStatusInProgress"
          (click)="handleRejectButtonClick()"
        >
          <span>{{ "dialogs.adminManageHelpOffer.rejectButtonLabel" | translate }}</span>
        </button>

      </mat-dialog-actions>
    </ng-container>

    <ng-container *ngIf="viewContext.getByIdError as error">
      <div class="error-view">
        <app-http-error-response-card
          [httpErrorResponse]="error"
        ></app-http-error-response-card>
      </div>
    </ng-container>
  </ng-container>
</div>
