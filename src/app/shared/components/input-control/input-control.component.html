<div
  class="input-control custom-control"
  [class.input-control--trailing-icon]="_showVisibilityToggle"
  [class.custom-control--required]="controlRequired"
>
  <div class="custom-control__top-panel">
    <label
      class="custom-control__top-panel-label"
      *ngIf="controlLabel"
      [for]="controlId"
    >
      <span>{{ controlLabel }}</span>
    </label>

    <div
      class="custom-control__top-panel-characters-counter"
      [class.custom-control__top-panel-characters-counter--primary-colored]="
        controlFocused
      "
      *ngIf="_showCharactersAmount"
    >
      <span>{{ inputRef.value.length }}</span>
      <span>/</span>
      <span>{{ controlMaxCharactersAmount }}</span>
    </div>
  </div>

  <input
    #inputRef
    class="custom-control__field app-custom-placeholder"
    [type]="inputType$ | async"
    [inputMode]="_inputMode"
    [id]="controlId"
    [disabled]="controlDisabled"
    [value]="controlValue"
    [placeholder]="controlPlaceholder"
    [maxLength]="controlMaxCharactersAmount"
    (input)="handleInputValueChange(inputRef.value)"
    (focus)="handleInputFocus()"
    (blur)="handleInputBlur()"
  />

  <app-visibility-toggle
    class="visibility-toggle"
    *ngIf="_showVisibilityToggle"
    [visibilityState]="_passwordVisibility"
    (nextVisibilityState)="handleNextVisibilityState($event)"
  ></app-visibility-toggle>
</div>
